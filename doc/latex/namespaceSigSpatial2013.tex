\hypertarget{namespaceSigSpatial2013}{\section{Sig\-Spatial2013 Namespace Reference}
\label{namespaceSigSpatial2013}\index{Sig\-Spatial2013@{Sig\-Spatial2013}}
}


\hyperlink{within_8cpp_source}{within.\-cpp}\-: solution for the W\-I\-N\-T\-H\-I\-N\-\_\-n problem  


\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structSigSpatial2013_1_1Ring}{Ring}
\begin{DoxyCompactList}\small\item\em Contains vertices of simple polygon without holes and it's bounding M\-B\-R. \end{DoxyCompactList}\item 
struct \hyperlink{structSigSpatial2013_1_1Polygon}{Polygon}
\begin{DoxyCompactList}\small\item\em Polygons with or without holes. \end{DoxyCompactList}\item 
struct \hyperlink{structSigSpatial2013_1_1PolygonSeq}{Polygon\-Seq}
\begin{DoxyCompactList}\small\item\em Polygons with the same id but different sequence numbers. \end{DoxyCompactList}\item 
class \hyperlink{classSigSpatial2013_1_1GMLParser}{G\-M\-L\-Parser}
\begin{DoxyCompactList}\small\item\em Simple \href{http://www.opengeospatial.org/standards/gml}{\tt G\-M\-L} parser based on \href{http://tibleiz.net/asm-xml/}{\tt Asm\-Xml}. \end{DoxyCompactList}\item 
struct \hyperlink{structSigSpatial2013_1_1pip}{pip}
\begin{DoxyCompactList}\small\item\em Functor for point in polygon (pip) detection. \end{DoxyCompactList}\item 
struct \hyperlink{structSigSpatial2013_1_1within__n}{within\-\_\-n}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{namespaceSigSpatial2013_ac8dd3c84f0c3e96c95be4d4e6cf4325c}{typedef C\-G\-A\-L\-::\-Cartesian$<$ double $>$ \hyperlink{namespaceSigSpatial2013_ac8dd3c84f0c3e96c95be4d4e6cf4325c}{K}}\label{namespaceSigSpatial2013_ac8dd3c84f0c3e96c95be4d4e6cf4325c}

\begin{DoxyCompactList}\small\item\em C\-G\-A\-L Kernel. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_a4d50a6d98aab2aa905654c8c2e3e3c58}{typedef K\-::\-Point\-\_\-2 \hyperlink{namespaceSigSpatial2013_a4d50a6d98aab2aa905654c8c2e3e3c58}{Point\-\_\-2}}\label{namespaceSigSpatial2013_a4d50a6d98aab2aa905654c8c2e3e3c58}

\begin{DoxyCompactList}\small\item\em C\-G\-A\-L 2d point. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_a1f1ea2e2cdbee6d560fd28d9332b4a9e}{typedef \\*
C\-G\-A\-L\-::\-Range\-\_\-tree\-\_\-map\-\_\-traits\-\_\-2\\*
$<$ \hyperlink{namespaceSigSpatial2013_ac8dd3c84f0c3e96c95be4d4e6cf4325c}{K}, std\-::pair$<$ int, int $>$ $>$ \hyperlink{namespaceSigSpatial2013_a1f1ea2e2cdbee6d560fd28d9332b4a9e}{Traits}}\label{namespaceSigSpatial2013_a1f1ea2e2cdbee6d560fd28d9332b4a9e}

\begin{DoxyCompactList}\small\item\em Associative data contains in each tree node, i.\-e., id and sequence number. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_a1f24a632c09e5f10b138ef0096857e43}{typedef C\-G\-A\-L\-::\-Range\-\_\-tree\-\_\-2\\*
$<$ \hyperlink{namespaceSigSpatial2013_a1f1ea2e2cdbee6d560fd28d9332b4a9e}{Traits} $>$ \hyperlink{namespaceSigSpatial2013_a1f24a632c09e5f10b138ef0096857e43}{Range\-\_\-tree\-\_\-2\-\_\-type}}\label{namespaceSigSpatial2013_a1f24a632c09e5f10b138ef0096857e43}

\begin{DoxyCompactList}\small\item\em Range tree type. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_af9823bd0b551eb301830d664ba571a15}{typedef Traits\-::\-Key \hyperlink{namespaceSigSpatial2013_af9823bd0b551eb301830d664ba571a15}{Key}}\label{namespaceSigSpatial2013_af9823bd0b551eb301830d664ba571a15}

\begin{DoxyCompactList}\small\item\em Tree node structure. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_aac40440b3bd8f75ef62e075b8958fece}{typedef Traits\-::\-Interval \hyperlink{namespaceSigSpatial2013_aac40440b3bd8f75ef62e075b8958fece}{Interval}}\label{namespaceSigSpatial2013_aac40440b3bd8f75ef62e075b8958fece}

\begin{DoxyCompactList}\small\item\em Query window type. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_a69c1e827245441b25a541c97b741b97c}{typedef std\-::pair$<$ int, int $>$ \hyperlink{namespaceSigSpatial2013_a69c1e827245441b25a541c97b741b97c}{I\-D}}\label{namespaceSigSpatial2013_a69c1e827245441b25a541c97b741b97c}

\begin{DoxyCompactList}\small\item\em I\-D here means neither point id nor polygon id, but the pair $<$I\-D,S\-E\-Q$>$ that uniquely identifies a point or a polygon which will be appear in the output. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_af3568b84c52aee7ab5aa8f15fb019d7f}{typedef std\-::pair$<$ \hyperlink{namespaceSigSpatial2013_a69c1e827245441b25a541c97b741b97c}{I\-D}, \hyperlink{namespaceSigSpatial2013_a69c1e827245441b25a541c97b741b97c}{I\-D} $>$ \hyperlink{namespaceSigSpatial2013_af3568b84c52aee7ab5aa8f15fb019d7f}{Result}}\label{namespaceSigSpatial2013_af3568b84c52aee7ab5aa8f15fb019d7f}

\begin{DoxyCompactList}\small\item\em All point and polygon pairs that satisfy a certain predicate, I\-N\-S\-I\-D\-E or W\-I\-T\-H\-I\-N\-\_\-n. All result will finally be output to a file in the format\-: {\ttfamily P\-O\-I\-N\-T\-\_\-\-I\-D\-:\-P\-O\-I\-N\-T\-\_\-\-S\-E\-Q\-:\-P\-O\-L\-Y\-G\-O\-N\-\_\-\-I\-D\-:P\-O\-L\-Y\-G\-O\-N\-\_\-\-S\-E\-Q}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
size\-\_\-t \hyperlink{namespaceSigSpatial2013_a317bfe5f97ff810889aab1765f916f49}{most\-\_\-recent\-\_\-polygon} (const \hyperlink{structSigSpatial2013_1_1PolygonSeq}{Polygon\-Seq} \&ps, int seq)
\begin{DoxyCompactList}\small\item\em Find the sequence number of the most recent polygon w.\-r.\-t a point. \end{DoxyCompactList}\item 
void \hyperlink{namespaceSigSpatial2013_ae6c95a87661a6bfca2decf6e7120508d}{read\-\_\-polygon} (const std\-::string \&fpoly, std\-::vector$<$ \hyperlink{structSigSpatial2013_1_1PolygonSeq}{Polygon\-Seq} $>$ \&v)
\begin{DoxyCompactList}\small\item\em Read from polygon file into vectors of \hyperlink{structSigSpatial2013_1_1PolygonSeq}{Polygon\-Seq} structure. \end{DoxyCompactList}\item 
\hypertarget{namespaceSigSpatial2013_abe57a3ac7481f0bf62658917a4d0642e}{bool \hyperlink{namespaceSigSpatial2013_abe57a3ac7481f0bf62658917a4d0642e}{read\-\_\-point} (std\-::ifstream \&f, std\-::vector$<$ \hyperlink{namespaceSigSpatial2013_af9823bd0b551eb301830d664ba571a15}{Key} $>$ \&v)}\label{namespaceSigSpatial2013_abe57a3ac7481f0bf62658917a4d0642e}

\begin{DoxyCompactList}\small\item\em Read from point file into vector of \hyperlink{namespaceSigSpatial2013_af9823bd0b551eb301830d664ba571a15}{Key} used to construct the range tree. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const size\-\_\-t \hyperlink{namespaceSigSpatial2013_a1d63766b99e35a7acbb9e1bffbcc9057}{P\-O\-I\-N\-T\-\_\-\-S\-I\-Z\-E} = 1e4
\begin{DoxyCompactList}\small\item\em The number of points read in at once. \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}{\bf Asm\-Xml Variables}\par
{\em Schemas used by Asm\-Xml to parse the G\-M\-L }\begin{DoxyCompactItemize}
\item 
const char \hyperlink{namespaceSigSpatial2013_a40970b19a17f8bf52c4dad47be296e71}{Point\-Schema} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em point schema with all fields and attributes ignored but coordinates. \end{DoxyCompactList}\item 
const char \hyperlink{namespaceSigSpatial2013_ad5f605834dcd0b8d7262e7fdc75215f9}{Polygon\-Schema} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em polygon schema with all fields and attributes ignored but coordinates of inner and outer boundaries. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}


\subsection{Function Documentation}
\hypertarget{namespaceSigSpatial2013_a317bfe5f97ff810889aab1765f916f49}{\index{Sig\-Spatial2013@{Sig\-Spatial2013}!most\-\_\-recent\-\_\-polygon@{most\-\_\-recent\-\_\-polygon}}
\index{most\-\_\-recent\-\_\-polygon@{most\-\_\-recent\-\_\-polygon}!SigSpatial2013@{Sig\-Spatial2013}}
\subsubsection[{most\-\_\-recent\-\_\-polygon}]{\setlength{\rightskip}{0pt plus 5cm}std\-::size\-\_\-t Sig\-Spatial2013\-::most\-\_\-recent\-\_\-polygon (
\begin{DoxyParamCaption}
\item[{const Polygon\-Seq \&}]{ps, }
\item[{int}]{seq}
\end{DoxyParamCaption}
)}}\label{namespaceSigSpatial2013_a317bfe5f97ff810889aab1765f916f49}
According the the spec, the most recent polygon w.\-r.\-t a point is the polygon with maximum sequence number smaller than the point's sequence number.


\begin{DoxyParams}{Parameters}
{\em ps} & \hyperlink{structSigSpatial2013_1_1Polygon}{Polygon} Sequence \\
\hline
{\em seq} & sequence number of the point \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
sequence number of the most recent polygon w.\-r.\-t \#seq 
\end{DoxyReturn}


Definition at line 11 of file common.\-cpp.


\begin{DoxyCode}
12     \{
13         \textcolor{keywordtype}{size\_t} b = 0, m = 0, e = ps.seq.size() - 1;
14 
15         \textcolor{keywordflow}{if} (seq >= ps.seq[e]) \textcolor{keywordflow}{return} e;
16 
17         \textcolor{keywordflow}{while} (b < e) \{
18             m = (b+e)/2;
19             \textcolor{keywordflow}{if} (ps.seq[m] > seq) e = m;
20             \textcolor{keywordflow}{else} b = m + 1;
21         \}
22 
23         \textcolor{keywordflow}{return} b-1;
24     \}
\end{DoxyCode}
\hypertarget{namespaceSigSpatial2013_ae6c95a87661a6bfca2decf6e7120508d}{\index{Sig\-Spatial2013@{Sig\-Spatial2013}!read\-\_\-polygon@{read\-\_\-polygon}}
\index{read\-\_\-polygon@{read\-\_\-polygon}!SigSpatial2013@{Sig\-Spatial2013}}
\subsubsection[{read\-\_\-polygon}]{\setlength{\rightskip}{0pt plus 5cm}void Sig\-Spatial2013\-::read\-\_\-polygon (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{fpoly, }
\item[{std\-::vector$<$ Polygon\-Seq $>$ \&}]{v}
\end{DoxyParamCaption}
)}}\label{namespaceSigSpatial2013_ae6c95a87661a6bfca2decf6e7120508d}

\begin{DoxyParams}{Parameters}
{\em fpoly} & \hyperlink{structSigSpatial2013_1_1Polygon}{Polygon} definition file \\
\hline
{\em v} & Vectors of \hyperlink{structSigSpatial2013_1_1PolygonSeq}{Polygon\-Seq} \\
\hline
\end{DoxyParams}


Definition at line 26 of file common.\-cpp.


\begin{DoxyCode}
28     \{
29         std::string xmlstr;
30         GMLParser gnp;
31         \textcolor{keywordtype}{char} ch;
32         \textcolor{keywordtype}{size\_t} id, seq;
33 
34         std::ifstream fin\_poly(fpoly);
35         \textcolor{keywordflow}{while} (fin\_poly >> ch) \{
36             Polygon poly;
37 
38             \textcolor{keywordflow}{while} (\textcolor{charliteral}{':'} != ch) fin\_poly >> ch;
39             fin\_poly >> \textcolor{keywordtype}{id} >> ch >> seq >> ch;
40 
41             getline(fin\_poly, xmlstr);
42             gnp.polygon(xmlstr.c\_str(),
43                         poly.outer\_ring, poly.inner\_rings);
44 
45             \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} > v.size()) \{
46                 PolygonSeq ps;
47                 ps.seq.push\_back(seq);
48                 ps.polys.push\_back(poly);
49                 v.push\_back(ps);
50             \} \textcolor{keywordflow}{else} \{
51                 PolygonSeq &ps = v[\textcolor{keywordtype}{id}-1];
52                 ps.seq.push\_back(seq);
53                 ps.polys.push\_back(poly);
54             \}
55 
56         \}
57         fin\_poly.close();
58     \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{namespaceSigSpatial2013_a1d63766b99e35a7acbb9e1bffbcc9057}{\index{Sig\-Spatial2013@{Sig\-Spatial2013}!P\-O\-I\-N\-T\-\_\-\-S\-I\-Z\-E@{P\-O\-I\-N\-T\-\_\-\-S\-I\-Z\-E}}
\index{P\-O\-I\-N\-T\-\_\-\-S\-I\-Z\-E@{P\-O\-I\-N\-T\-\_\-\-S\-I\-Z\-E}!SigSpatial2013@{Sig\-Spatial2013}}
\subsubsection[{P\-O\-I\-N\-T\-\_\-\-S\-I\-Z\-E}]{\setlength{\rightskip}{0pt plus 5cm}const size\-\_\-t Sig\-Spatial2013\-::\-P\-O\-I\-N\-T\-\_\-\-S\-I\-Z\-E = 1e4}}\label{namespaceSigSpatial2013_a1d63766b99e35a7acbb9e1bffbcc9057}
Because of the memory constraints, it's impratical to read in all the points at once. And also, it's faster not to do so. This is an empirical value. Results show that this might be the right value. According to my result, any values that are neither too small nor too big will do. The time complexity of the program is approximately $ O(n\log n)$, So smaller values are preferred. But too small values will incur too much overhead offsetting the benefit of smaller values. 

Definition at line 113 of file common.\-h.

\hypertarget{namespaceSigSpatial2013_a40970b19a17f8bf52c4dad47be296e71}{\index{Sig\-Spatial2013@{Sig\-Spatial2013}!Point\-Schema@{Point\-Schema}}
\index{Point\-Schema@{Point\-Schema}!SigSpatial2013@{Sig\-Spatial2013}}
\subsubsection[{Point\-Schema}]{\setlength{\rightskip}{0pt plus 5cm}const char Sig\-Spatial2013\-::\-Point\-Schema\mbox{[}$\,$\mbox{]}}}\label{namespaceSigSpatial2013_a40970b19a17f8bf52c4dad47be296e71}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \textcolor{stringliteral}{"\(\backslash\)}
\textcolor{stringliteral}{<schema>\(\backslash\)}
\textcolor{stringliteral}{  <document name=\(\backslash\)"gml:Point\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{    <attribute name=\(\backslash\)"srsName\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{    <attribute name=\(\backslash\)"xmlns:gml\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{    <element name=\(\backslash\)"gml:coordinates\(\backslash\)" type=\(\backslash\)"text\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{      <attribute name=\(\backslash\)"decimal\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{      <attribute name=\(\backslash\)"cs\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{      <attribute name=\(\backslash\)"ts\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{    </element>\(\backslash\)}
\textcolor{stringliteral}{  </document>\(\backslash\)}
\textcolor{stringliteral}{</schema>"}
\end{DoxyCode}


Definition at line 28 of file gmlparser.\-h.

\hypertarget{namespaceSigSpatial2013_ad5f605834dcd0b8d7262e7fdc75215f9}{\index{Sig\-Spatial2013@{Sig\-Spatial2013}!Polygon\-Schema@{Polygon\-Schema}}
\index{Polygon\-Schema@{Polygon\-Schema}!SigSpatial2013@{Sig\-Spatial2013}}
\subsubsection[{Polygon\-Schema}]{\setlength{\rightskip}{0pt plus 5cm}const char Sig\-Spatial2013\-::\-Polygon\-Schema\mbox{[}$\,$\mbox{]}}}\label{namespaceSigSpatial2013_ad5f605834dcd0b8d7262e7fdc75215f9}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \textcolor{stringliteral}{"\(\backslash\)}
\textcolor{stringliteral}{<schema>\(\backslash\)}
\textcolor{stringliteral}{  <document name=\(\backslash\)"gml:Polygon\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{    <attribute name=\(\backslash\)"srsName\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{    <attribute name=\(\backslash\)"xmlns:gml\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{    <element name=\(\backslash\)"gml:outerBoundaryIs\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{      <element name=\(\backslash\)"gml:LinearRing\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{        <element name=\(\backslash\)"gml:coordinates\(\backslash\)" type=\(\backslash\)"text\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{          <attribute name=\(\backslash\)"decimal\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{          <attribute name=\(\backslash\)"cs\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{          <attribute name=\(\backslash\)"ts\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{        </element>\(\backslash\)}
\textcolor{stringliteral}{      </element>\(\backslash\)}
\textcolor{stringliteral}{    </element>\(\backslash\)}
\textcolor{stringliteral}{    <element name=\(\backslash\)"gml:innerBoundaryIs\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{      <collection name=\(\backslash\)"gml:LinearRing\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{        <element name=\(\backslash\)"gml:coordinates\(\backslash\)" type=\(\backslash\)"text\(\backslash\)">\(\backslash\)}
\textcolor{stringliteral}{          <attribute name=\(\backslash\)"decimal\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{          <attribute name=\(\backslash\)"cs\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{          <attribute name=\(\backslash\)"ts\(\backslash\)" ignore=\(\backslash\)"yes\(\backslash\)"/>\(\backslash\)}
\textcolor{stringliteral}{        </element>\(\backslash\)}
\textcolor{stringliteral}{      </collection>\(\backslash\)}
\textcolor{stringliteral}{    </element>\(\backslash\)}
\textcolor{stringliteral}{  </document>\(\backslash\)}
\textcolor{stringliteral}{</schema>"}
\end{DoxyCode}


Definition at line 44 of file gmlparser.\-h.

